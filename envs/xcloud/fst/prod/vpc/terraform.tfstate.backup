{
    "version": 3,
    "terraform_version": "0.11.7",
    "serial": 47,
    "lineage": "0c1d4719-0e24-729d-004c-68e50e8f8917",
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {
                "aws_cloudformation_stack.aws_waf": {
                    "type": "aws_cloudformation_stack",
                    "depends_on": [
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "arn:aws:cloudformation:us-east-1:589756021628:stack/awswafsecurityautomations/5a8aa430-a0cf-11e8-9ec5-500c28b38499",
                        "attributes": {
                            "capabilities.#": "1",
                            "capabilities.1328347040": "CAPABILITY_IAM",
                            "disable_rollback": "false",
                            "iam_role_arn": "",
                            "id": "arn:aws:cloudformation:us-east-1:589756021628:stack/awswafsecurityautomations/5a8aa430-a0cf-11e8-9ec5-500c28b38499",
                            "name": "awswafsecurityautomations",
                            "outputs.%": "2",
                            "outputs.BadBotHoneypotEndpoint": "https://9n6z7f4r52.execute-api.us-east-1.amazonaws.com/ProdStage",
                            "outputs.WAFWebACL": "c850e1e5-bb6e-4883-8bed-623347e555e9",
                            "parameters.%": "1",
                            "parameters.AccessLogBucket": "589756021628-prod-fst-alb-logs",
                            "tags.%": "0",
                            "template_body": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Conditions\":{\"BadBotProtectionActivated\":{\"Fn::Equals\":[{\"Ref\":\"ActivateBadBotProtectionParam\"},\"yes\"]},\"CreateWebACL\":{\"Fn::Or\":[{\"Condition\":\"SqlInjectionProtectionActivated\"},{\"Condition\":\"CrossSiteScriptingProtectionActivated\"},{\"Condition\":\"HttpFloodProtectionActivated\"},{\"Condition\":\"ScansProbesProtectionActivated\"},{\"Condition\":\"ReputationListsProtectionActivated\"},{\"Condition\":\"BadBotProtectionActivated\"}]},\"CrossSiteScriptingProtectionActivated\":{\"Fn::Equals\":[{\"Ref\":\"CrossSiteScriptingProtectionParam\"},\"yes\"]},\"HttpFloodProtectionActivated\":{\"Fn::Equals\":[{\"Ref\":\"ActivateHttpFloodProtectionParam\"},\"yes\"]},\"LogParserActivated\":{\"Fn::Equals\":[{\"Ref\":\"ActivateScansProbesProtectionParam\"},\"yes\"]},\"ReputationListsProtectionActivated\":{\"Fn::Equals\":[{\"Ref\":\"ActivateReputationListsProtectionParam\"},\"yes\"]},\"ScansProbesProtectionActivated\":{\"Fn::Equals\":[{\"Ref\":\"ActivateScansProbesProtectionParam\"},\"yes\"]},\"SqlInjectionProtectionActivated\":{\"Fn::Equals\":[{\"Ref\":\"SqlInjectionProtectionParam\"},\"yes\"]}},\"Description\":\"(SO0006-ALB) - AWS WAF Security Automations - ALB v2.1: This AWS CloudFormation template helps you provision the AWS WAF Security Automations stack without worrying about creating and configuring the underlying AWS infrastructure. **WARNING** This template creates an AWS Lambda function, an AWS WAF Web ACL, an Amazon S3 bucket, and an Amazon CloudWatch custom metric. You will be billed for the AWS resources used if you create a stack from this template. **NOTICE** Copyright 2016 Amazon.com, Inc. or its affiliates. All Rights Reserved. Licensed under the Amazon Software License (the License). You may not use this file except in compliance with the License. A copy of the License is located at http://aws.amazon.com/asl/ or in the license file accompanying this file. This file is distributed on an AS IS BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions and limitations under the License.\",\"Metadata\":{\"AWS::CloudFormation::Interface\":{\"ParameterGroups\":[{\"Label\":{\"default\":\"Protection List\"},\"Parameters\":[\"SqlInjectionProtectionParam\",\"CrossSiteScriptingProtectionParam\",\"ActivateHttpFloodProtectionParam\",\"ActivateScansProbesProtectionParam\",\"ActivateReputationListsProtectionParam\",\"ActivateBadBotProtectionParam\"]},{\"Label\":{\"default\":\"Settings\"},\"Parameters\":[\"AccessLogBucket\"]},{\"Label\":{\"default\":\"Advanced Settings\"},\"Parameters\":[\"RequestThreshold\",\"ErrorThreshold\",\"WAFBlockPeriod\"]},{\"Label\":{\"default\":\"Anonymous Metrics Request\"},\"Parameters\":[\"SendAnonymousUsageData\"]}],\"ParameterLabels\":{\"AccessLogBucket\":{\"default\":\"ALB Access Log Bucket Name\"},\"ActivateBadBotProtectionParam\":{\"default\":\"Activate Bad Bot Protection\"},\"ActivateHttpFloodProtectionParam\":{\"default\":\"Activate HTTP Flood Protection\"},\"ActivateReputationListsProtectionParam\":{\"default\":\"Activate Reputation List Protection\"},\"ActivateScansProbesProtectionParam\":{\"default\":\"Activate Scanner \\u0026 Probe Protection\"},\"CrossSiteScriptingProtectionParam\":{\"default\":\"Activate Cross-site Scripting Protection\"},\"ErrorThreshold\":{\"default\":\"Error Threshold\"},\"RequestThreshold\":{\"default\":\"Request Threshold\"},\"SendAnonymousUsageData\":{\"default\":\"Send Anonymous Usage Data\"},\"SqlInjectionProtectionParam\":{\"default\":\"Activate SQL Injection Protection\"},\"WAFBlockPeriod\":{\"default\":\"WAF Block Period\"}}}},\"Outputs\":{\"BadBotHoneypotEndpoint\":{\"Condition\":\"BadBotProtectionActivated\",\"Description\":\"Bad Bot Honeypot Endpoint\",\"Value\":{\"Fn::Join\":[\"\",[\"https://\",{\"Ref\":\"ApiGatewayBadBot\"},\".execute-api.\",{\"Ref\":\"AWS::Region\"},\".amazonaws.com/\",{\"Ref\":\"ApiGatewayBadBotStage\"}]]}},\"WAFWebACL\":{\"Condition\":\"CreateWebACL\",\"Description\":\"AWS WAF WebACL ID\",\"Value\":{\"Ref\":\"WAFWebACL\"}}},\"Parameters\":{\"AccessLogBucket\":{\"AllowedPattern\":\"(^$|^([a-z]|(\\\\d(?!\\\\d{0,2}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3})))([a-z\\\\d]|(\\\\.(?!(\\\\.|-)))|(-(?!\\\\.))){1,61}[a-z\\\\d]$)\",\"Default\":\"\",\"Description\":\"Enter a name for the Amazon S3 bucket where you want to store Amazon ALB access logs. This can be the name of either an existing S3 bucket, or a new bucket that the template will create during stack launch (if it does not find a matching bucket name). The solution will modify the bucket?s notification configuration to trigger the Log Parser AWS Lambda function whenever a new log file is saved in this bucket. More about bucket name restriction here: http://amzn.to/1p1YlU5\",\"Type\":\"String\"},\"ActivateBadBotProtectionParam\":{\"AllowedValues\":[\"yes\",\"no\"],\"Default\":\"yes\",\"Description\":\"Choose yes to enable the component designed to block bad bots and content scrapers.\",\"Type\":\"String\"},\"ActivateHttpFloodProtectionParam\":{\"AllowedValues\":[\"yes\",\"no\"],\"Default\":\"yes\",\"Description\":\"Choose yes to enable the component designed to block HTTP flood attacks.\",\"Type\":\"String\"},\"ActivateReputationListsProtectionParam\":{\"AllowedValues\":[\"yes\",\"no\"],\"Default\":\"yes\",\"Description\":\"Choose yes to block requests from IP addresses on third-party reputation lists (supported lists: spamhaus, torproject, and emergingthreats).\",\"Type\":\"String\"},\"ActivateScansProbesProtectionParam\":{\"AllowedValues\":[\"yes\",\"no\"],\"Default\":\"yes\",\"Description\":\"Choose yes to enable the component designed to block scanners and probes.\",\"Type\":\"String\"},\"CrossSiteScriptingProtectionParam\":{\"AllowedValues\":[\"yes\",\"no\"],\"Default\":\"yes\",\"Description\":\"Choose yes to enable the component designed to block common XSS attacks.\",\"Type\":\"String\"},\"ErrorThreshold\":{\"Default\":\"50\",\"Description\":\"If you chose yes for the Activate Scanners \\u0026 Probes Protection parameter, enter the maximum acceptable bad requests per minute per IP. If you chose to deactivate Scanners \\u0026 Probes protection, ignore this parameter.\",\"MinValue\":\"0\",\"Type\":\"Number\"},\"RequestThreshold\":{\"Default\":\"2000\",\"Description\":\"If you chose yes for the Activate HTTP Flood Protection parameter, enter the maximum acceptable requests per FIVE-minute period per IP address. Minimum value of 2000. If you chose to deactivate this protection, ignore this parameter.\",\"MinValue\":\"2000\",\"Type\":\"Number\"},\"SendAnonymousUsageData\":{\"AllowedValues\":[\"yes\",\"no\"],\"Default\":\"yes\",\"Description\":\"Send anonymous data to AWS to help us understand solution usage across our customer base as a whole. To opt out of this feature, select No.\",\"Type\":\"String\"},\"SqlInjectionProtectionParam\":{\"AllowedValues\":[\"yes\",\"no\"],\"Default\":\"yes\",\"Description\":\"Choose yes to enable the component designed to block common SQL injection attacks.\",\"Type\":\"String\"},\"WAFBlockPeriod\":{\"Default\":\"240\",\"Description\":\"If you chose yes for the Activate Scanners \\u0026 Probes Protection parameters, enter the period (in minutes) to block applicable IP addresses. If you chose to deactivate this protection, ignore this parameter.\",\"MinValue\":\"0\",\"Type\":\"Number\"}},\"Resources\":{\"ApiGatewayBadBot\":{\"Condition\":\"BadBotProtectionActivated\",\"Properties\":{\"Description\":\"API created by AWS WAF Security Automations CloudFormation template. This endpoint will be used to capture bad bots.\",\"Name\":\"Security Automations - WAF Bad Bot API\"},\"Type\":\"AWS::ApiGateway::RestApi\"},\"ApiGatewayBadBotDeployment\":{\"Condition\":\"BadBotProtectionActivated\",\"DependsOn\":\"ApiGatewayBadBotMethod\",\"Properties\":{\"Description\":\"CloudFormation Deployment Stage\",\"RestApiId\":{\"Ref\":\"ApiGatewayBadBot\"},\"StageName\":\"CFDeploymentStage\"},\"Type\":\"AWS::ApiGateway::Deployment\"},\"ApiGatewayBadBotMethod\":{\"Condition\":\"BadBotProtectionActivated\",\"DependsOn\":[\"LambdaWAFBadBotParserFunction\",\"LambdaInvokePermissionBadBot\",\"ApiGatewayBadBot\"],\"Properties\":{\"AuthorizationType\":\"NONE\",\"HttpMethod\":\"ANY\",\"Integration\":{\"IntegrationHttpMethod\":\"POST\",\"Type\":\"AWS_PROXY\",\"Uri\":{\"Fn::Join\":[\"\",[\"arn:aws:apigateway:\",{\"Ref\":\"AWS::Region\"},\":lambda:path/2015-03-31/functions/\",{\"Fn::GetAtt\":[\"LambdaWAFBadBotParserFunction\",\"Arn\"]},\"/invocations\"]]}},\"RequestParameters\":{\"method.request.header.X-Forwarded-For\":false},\"ResourceId\":{\"Ref\":\"ApiGatewayBadBotResource\"},\"RestApiId\":{\"Ref\":\"ApiGatewayBadBot\"}},\"Type\":\"AWS::ApiGateway::Method\"},\"ApiGatewayBadBotMethodRoot\":{\"Condition\":\"BadBotProtectionActivated\",\"DependsOn\":[\"LambdaWAFBadBotParserFunction\",\"LambdaInvokePermissionBadBot\",\"ApiGatewayBadBot\"],\"Properties\":{\"AuthorizationType\":\"NONE\",\"HttpMethod\":\"ANY\",\"Integration\":{\"IntegrationHttpMethod\":\"POST\",\"Type\":\"AWS_PROXY\",\"Uri\":{\"Fn::Join\":[\"\",[\"arn:aws:apigateway:\",{\"Ref\":\"AWS::Region\"},\":lambda:path/2015-03-31/functions/\",{\"Fn::GetAtt\":[\"LambdaWAFBadBotParserFunction\",\"Arn\"]},\"/invocations\"]]}},\"RequestParameters\":{\"method.request.header.X-Forwarded-For\":false},\"ResourceId\":{\"Fn::GetAtt\":[\"ApiGatewayBadBot\",\"RootResourceId\"]},\"RestApiId\":{\"Ref\":\"ApiGatewayBadBot\"}},\"Type\":\"AWS::ApiGateway::Method\"},\"ApiGatewayBadBotResource\":{\"Condition\":\"BadBotProtectionActivated\",\"Properties\":{\"ParentId\":{\"Fn::GetAtt\":[\"ApiGatewayBadBot\",\"RootResourceId\"]},\"PathPart\":\"{proxy+}\",\"RestApiId\":{\"Ref\":\"ApiGatewayBadBot\"}},\"Type\":\"AWS::ApiGateway::Resource\"},\"ApiGatewayBadBotStage\":{\"Condition\":\"BadBotProtectionActivated\",\"DependsOn\":\"ApiGatewayBadBotDeployment\",\"Properties\":{\"DeploymentId\":{\"Ref\":\"ApiGatewayBadBotDeployment\"},\"Description\":\"Production Stage\",\"RestApiId\":{\"Ref\":\"ApiGatewayBadBot\"},\"StageName\":\"ProdStage\"},\"Type\":\"AWS::ApiGateway::Stage\"},\"CreateUniqueID\":{\"DependsOn\":\"SolutionHelper\",\"Properties\":{\"CreateUniqueID\":\"true\",\"Region\":{\"Ref\":\"AWS::Region\"},\"ServiceToken\":{\"Fn::GetAtt\":[\"SolutionHelper\",\"Arn\"]}},\"Type\":\"Custom::CreateUUID\"},\"LambdaInvokePermissionBadBot\":{\"Condition\":\"BadBotProtectionActivated\",\"DependsOn\":\"LambdaWAFBadBotParserFunction\",\"Properties\":{\"Action\":\"lambda:*\",\"FunctionName\":{\"Fn::GetAtt\":[\"LambdaWAFBadBotParserFunction\",\"Arn\"]},\"Principal\":\"apigateway.amazonaws.com\"},\"Type\":\"AWS::Lambda::Permission\"},\"LambdaInvokePermissionLogParser\":{\"Condition\":\"LogParserActivated\",\"DependsOn\":\"LambdaWAFLogParserFunction\",\"Properties\":{\"Action\":\"lambda:*\",\"FunctionName\":{\"Fn::GetAtt\":[\"LambdaWAFLogParserFunction\",\"Arn\"]},\"Principal\":\"s3.amazonaws.com\",\"SourceAccount\":{\"Ref\":\"AWS::AccountId\"}},\"Type\":\"AWS::Lambda::Permission\"},\"LambdaInvokePermissionReputationListsParser\":{\"Condition\":\"ReputationListsProtectionActivated\",\"DependsOn\":[\"LambdaWAFReputationListsParserFunction\",\"LambdaWAFReputationListsParserEventsRule\"],\"Properties\":{\"Action\":\"lambda:InvokeFunction\",\"FunctionName\":{\"Ref\":\"LambdaWAFReputationListsParserFunction\"},\"Principal\":\"events.amazonaws.com\",\"SourceArn\":{\"Fn::GetAtt\":[\"LambdaWAFReputationListsParserEventsRule\",\"Arn\"]}},\"Type\":\"AWS::Lambda::Permission\"},\"LambdaRoleBadBot\":{\"Condition\":\"BadBotProtectionActivated\",\"Properties\":{\"AssumeRolePolicyDocument\":{\"Statement\":[{\"Action\":[\"sts:AssumeRole\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]}}],\"Version\":\"2012-10-17\"},\"Path\":\"/\",\"Policies\":[{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"waf-regional:GetChangeToken\",\"Effect\":\"Allow\",\"Resource\":\"*\"}]},\"PolicyName\":\"WAFGetChangeToken\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"waf-regional:GetIPSet\",\"waf-regional:UpdateIPSet\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:waf-regional:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":ipset/\",{\"Ref\":\"WAFBadBotSet\"}]]}}]},\"PolicyName\":\"WAFGetAndUpdateIPSet\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\":\",[\"arn:aws:logs\",{\"Ref\":\"AWS::Region\"},{\"Ref\":\"AWS::AccountId\"},\"log-group:/aws/lambda/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"LogsAccess\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"cloudformation:DescribeStacks\",\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:cloudformation:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":stack/\",{\"Ref\":\"AWS::StackName\"},\"/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"CloudFormationAccess\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"cloudwatch:GetMetricStatistics\",\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"CloudWatchAccess\"}]},\"Type\":\"AWS::IAM::Role\"},\"LambdaRoleCustomResource\":{\"Condition\":\"CreateWebACL\",\"DependsOn\":\"WAFWebACL\",\"Properties\":{\"AssumeRolePolicyDocument\":{\"Statement\":[{\"Action\":[\"sts:AssumeRole\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]}}],\"Version\":\"2012-10-17\"},\"Path\":\"/\",\"Policies\":[{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"s3:CreateBucket\",\"s3:GetBucketLocation\",\"s3:GetBucketNotification\",\"s3:GetObject\",\"s3:ListBucket\",\"s3:PutBucketNotification\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:s3:::\",{\"Ref\":\"AccessLogBucket\"}]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"S3Access\"},{\"Fn::If\":[\"ReputationListsProtectionActivated\",{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"lambda:InvokeFunction\",\"Effect\":\"Allow\",\"Resource\":{\"Fn::GetAtt\":[\"LambdaWAFReputationListsParserFunction\",\"Arn\"]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"LambdaAccess\"},{\"Ref\":\"AWS::NoValue\"}]},{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"waf-regional:GetWebACL\",\"waf-regional:UpdateWebACL\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:waf-regional:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":webacl/\",{\"Ref\":\"WAFWebACL\"}]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"WAFAccess\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"waf-regional:GetRule\",\"waf-regional:GetIPSet\",\"waf-regional:UpdateIPSet\",\"waf-regional:UpdateWebACL\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:waf-regional:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":rule/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"WAFRuleAccess\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"waf-regional:GetIPSet\",\"waf-regional:UpdateIPSet\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:waf-regional:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":ipset/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"WAFIPSetAccess\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"waf-regional:GetRateBasedRule\",\"waf-regional:CreateRateBasedRule\",\"waf-regional:DeleteRateBasedRule\",\"waf-regional:ListRateBasedRules\",\"waf-regional:UpdateWebACL\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:waf-regional:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":ratebasedrule/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"WAFRateBasedRuleAccess\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"cloudformation:DescribeStacks\",\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:cloudformation:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":stack/\",{\"Ref\":\"AWS::StackName\"},\"/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"CloudFormationAccess\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"waf-regional:GetChangeToken\",\"Effect\":\"Allow\",\"Resource\":\"*\"}]},\"PolicyName\":\"WAFGetChangeToken\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\":\",[\"arn:aws:logs\",{\"Ref\":\"AWS::Region\"},{\"Ref\":\"AWS::AccountId\"},\"log-group:/aws/lambda/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"LogsAccess\"}]},\"Type\":\"AWS::IAM::Role\"},\"LambdaRoleLogParser\":{\"Condition\":\"LogParserActivated\",\"Properties\":{\"AssumeRolePolicyDocument\":{\"Statement\":[{\"Action\":[\"sts:AssumeRole\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]}}],\"Version\":\"2012-10-17\"},\"Path\":\"/\",\"Policies\":[{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:s3:::\",{\"Ref\":\"AccessLogBucket\"},\"/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"S3Access\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"s3:PutObject\",\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:s3:::\",{\"Ref\":\"AccessLogBucket\"},\"/aws-waf-security-automations-current-blocked-ips.json\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"S3AccessPut\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"waf-regional:GetChangeToken\",\"Effect\":\"Allow\",\"Resource\":\"*\"}]},\"PolicyName\":\"WAFGetChangeToken\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"waf-regional:GetIPSet\",\"waf-regional:UpdateIPSet\"],\"Effect\":\"Allow\",\"Resource\":[{\"Fn::Join\":[\"\",[\"arn:aws:waf-regional:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":ipset/\",{\"Ref\":\"WAFBlacklistSet\"}]]},{\"Fn::Join\":[\"\",[\"arn:aws:waf-regional:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":ipset/\",{\"Ref\":\"WAFScansProbesSet\"}]]}]}]},\"PolicyName\":\"WAFGetAndUpdateIPSet\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\":\",[\"arn:aws:logs\",{\"Ref\":\"AWS::Region\"},{\"Ref\":\"AWS::AccountId\"},\"log-group:/aws/lambda/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"LogsAccess\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"cloudwatch:GetMetricStatistics\",\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"CloudWatchAccess\"}]},\"Type\":\"AWS::IAM::Role\"},\"LambdaRoleReputationListsParser\":{\"Condition\":\"ReputationListsProtectionActivated\",\"Properties\":{\"AssumeRolePolicyDocument\":{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"lambda.amazonaws.com\"]}}]},\"Policies\":[{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\":\",[\"arn:aws:logs\",{\"Ref\":\"AWS::Region\"},{\"Ref\":\"AWS::AccountId\"},\"log-group:/aws/lambda/*\"]]}}]},\"PolicyName\":\"CloudWatchLogs\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"waf-regional:GetChangeToken\",\"Effect\":\"Allow\",\"Resource\":\"*\"}]},\"PolicyName\":\"WAFGetChangeToken\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"waf-regional:GetIPSet\",\"waf-regional:UpdateIPSet\"],\"Effect\":\"Allow\",\"Resource\":[{\"Fn::Join\":[\"\",[\"arn:aws:waf-regional:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":ipset/\",{\"Ref\":\"WAFReputationListsSet1\"}]]},{\"Fn::Join\":[\"\",[\"arn:aws:waf-regional:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":ipset/\",{\"Ref\":\"WAFReputationListsSet2\"}]]}]}]},\"PolicyName\":\"WAFGetAndUpdateIPSet\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"cloudformation:DescribeStacks\",\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\"\",[\"arn:aws:cloudformation:\",{\"Ref\":\"AWS::Region\"},\":\",{\"Ref\":\"AWS::AccountId\"},\":stack/\",{\"Ref\":\"AWS::StackName\"},\"/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"CloudFormationAccess\"},{\"PolicyDocument\":{\"Statement\":[{\"Action\":\"cloudwatch:GetMetricStatistics\",\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"CloudWatchAccess\"}]},\"Type\":\"AWS::IAM::Role\"},\"LambdaWAFBadBotParserFunction\":{\"Condition\":\"BadBotProtectionActivated\",\"DependsOn\":\"LambdaRoleBadBot\",\"Properties\":{\"Code\":{\"S3Bucket\":{\"Fn::Join\":[\"-\",[\"solutions\",{\"Ref\":\"AWS::Region\"}]]},\"S3Key\":\"aws-waf-security-automations/v2/access-handler.zip\"},\"Description\":\"This lambda function will intercepts and inspects trap endpoint requests to extract its IP address, and then add it to an AWS WAF block list.\",\"Environment\":{\"Variables\":{\"IP_SET_ID_BAD_BOT\":{\"Ref\":\"WAFBadBotSet\"},\"LOG_TYPE\":\"alb\",\"REGION\":{\"Ref\":\"AWS::Region\"},\"SEND_ANONYMOUS_USAGE_DATA\":{\"Ref\":\"SendAnonymousUsageData\"},\"UUID\":{\"Fn::GetAtt\":[\"CreateUniqueID\",\"UUID\"]}}},\"Handler\":\"access-handler.lambda_handler\",\"MemorySize\":\"128\",\"Role\":{\"Fn::GetAtt\":[\"LambdaRoleBadBot\",\"Arn\"]},\"Runtime\":\"python2.7\",\"Timeout\":\"300\"},\"Type\":\"AWS::Lambda::Function\"},\"LambdaWAFCustomResourceFunction\":{\"Condition\":\"CreateWebACL\",\"DependsOn\":\"LambdaRoleCustomResource\",\"Properties\":{\"Code\":{\"S3Bucket\":{\"Fn::Join\":[\"-\",[\"solutions\",{\"Ref\":\"AWS::Region\"}]]},\"S3Key\":\"aws-waf-security-automations/v4/custom-resource.zip\"},\"Description\":\"This lambda function configures the Web ACL rules based on the features enabled in the CloudFormation template.\",\"Handler\":\"custom-resource.lambda_handler\",\"MemorySize\":\"128\",\"Role\":{\"Fn::GetAtt\":[\"LambdaRoleCustomResource\",\"Arn\"]},\"Runtime\":\"python2.7\",\"Timeout\":\"300\"},\"Type\":\"AWS::Lambda::Function\"},\"LambdaWAFLogParserFunction\":{\"Condition\":\"LogParserActivated\",\"DependsOn\":[\"LambdaRoleLogParser\",\"WAFBlacklistSet\",\"WAFScansProbesSet\"],\"Properties\":{\"Code\":{\"S3Bucket\":{\"Fn::Join\":[\"-\",[\"solutions\",{\"Ref\":\"AWS::Region\"}]]},\"S3Key\":\"aws-waf-security-automations/v2/log-parser.zip\"},\"Description\":{\"Fn::Join\":[\"\",[\"This function parses ALB access logs to identify suspicious behavior, such as an abnormal amount of errors. It then blocks those IP addresses for a customer-defined period of time. Parameters: \",{\"Ref\":\"ErrorThreshold\"},\",\",{\"Ref\":\"WAFBlockPeriod\"},\".\"]]},\"Environment\":{\"Variables\":{\"BLACKLIST_BLOCK_PERIOD\":{\"Ref\":\"WAFBlockPeriod\"},\"ERROR_PER_MINUTE_LIMIT\":{\"Ref\":\"ErrorThreshold\"},\"IP_SET_ID_AUTO_BLOCK\":{\"Ref\":\"WAFScansProbesSet\"},\"IP_SET_ID_BLACKLIST\":{\"Ref\":\"WAFBlacklistSet\"},\"LIMIT_IP_ADDRESS_RANGES_PER_IP_MATCH_CONDITION\":\"10000\",\"LOG_TYPE\":\"alb\",\"MAX_AGE_TO_UPDATE\":\"30\",\"OUTPUT_BUCKET\":{\"Ref\":\"AccessLogBucket\"},\"REGION\":{\"Ref\":\"AWS::Region\"},\"SEND_ANONYMOUS_USAGE_DATA\":{\"Ref\":\"SendAnonymousUsageData\"},\"UUID\":{\"Fn::GetAtt\":[\"CreateUniqueID\",\"UUID\"]}}},\"Handler\":\"log-parser.lambda_handler\",\"MemorySize\":\"512\",\"Role\":{\"Fn::GetAtt\":[\"LambdaRoleLogParser\",\"Arn\"]},\"Runtime\":\"python2.7\",\"Timeout\":\"300\"},\"Type\":\"AWS::Lambda::Function\"},\"LambdaWAFReputationListsParserEventsRule\":{\"Condition\":\"ReputationListsProtectionActivated\",\"DependsOn\":[\"LambdaWAFReputationListsParserFunction\",\"WAFReputationListsSet1\",\"WAFReputationListsSet2\"],\"Properties\":{\"Description\":\"Security Automations - WAF Reputation Lists\",\"ScheduleExpression\":\"rate(1 hour)\",\"Targets\":[{\"Arn\":{\"Fn::GetAtt\":[\"LambdaWAFReputationListsParserFunction\",\"Arn\"]},\"Id\":\"LambdaWAFReputationListsParserFunction\",\"Input\":{\"Fn::Join\":[\"\",[\"{\\\"lists\\\":\",\"[{\\\"url\\\":\\\"https://www.spamhaus.org/drop/drop.txt\\\"},{\\\"url\\\":\\\"https://check.torproject.org/exit-addresses\\\",\\\"prefix\\\":\\\"ExitAddress \\\"},{\\\"url\\\":\\\"https://rules.emergingthreats.net/fwrules/emerging-Block-IPs.txt\\\"}]\",\",\\\"logType\\\":\\\"alb\\\"\",\",\\\"region\\\":\\\"\",{\"Ref\":\"AWS::Region\"},\"\\\",\",\"\\\"ipSetIds\\\": [\",\"\\\"\",{\"Ref\":\"WAFReputationListsSet1\"},\"\\\",\",\"\\\"\",{\"Ref\":\"WAFReputationListsSet2\"},\"\\\"\",\"]}\"]]}}]},\"Type\":\"AWS::Events::Rule\"},\"LambdaWAFReputationListsParserFunction\":{\"Condition\":\"ReputationListsProtectionActivated\",\"DependsOn\":\"LambdaRoleReputationListsParser\",\"Properties\":{\"Code\":{\"S3Bucket\":{\"Fn::Join\":[\"-\",[\"solutions\",{\"Ref\":\"AWS::Region\"}]]},\"S3Key\":\"aws-waf-security-automations/v3/reputation-lists-parser.zip\"},\"Description\":\"This lambda function checks third-party IP reputation lists hourly for new IP ranges to block. These lists include the Spamhaus Dont Route Or Peer (DROP) and Extended Drop (EDROP) lists, the Proofpoint Emerging Threats IP list, and the Tor exit node list.\",\"Environment\":{\"Variables\":{\"SEND_ANONYMOUS_USAGE_DATA\":{\"Ref\":\"SendAnonymousUsageData\"},\"UUID\":{\"Fn::GetAtt\":[\"CreateUniqueID\",\"UUID\"]}}},\"Handler\":\"reputation-lists-parser.handler\",\"MemorySize\":\"128\",\"Role\":{\"Fn::GetAtt\":[\"LambdaRoleReputationListsParser\",\"Arn\"]},\"Runtime\":\"nodejs6.10\",\"Timeout\":\"300\"},\"Type\":\"AWS::Lambda::Function\"},\"SolutionHelper\":{\"DependsOn\":\"SolutionHelperRole\",\"Properties\":{\"Code\":{\"S3Bucket\":{\"Fn::Join\":[\"\",[\"solutions-\",{\"Ref\":\"AWS::Region\"}]]},\"S3Key\":\"library/solution-helper/v1/solution-helper.zip\"},\"Description\":\"This lambda function executes generic common tasks to support this solution.\",\"Handler\":\"solution-helper.lambda_handler\",\"Role\":{\"Fn::GetAtt\":[\"SolutionHelperRole\",\"Arn\"]},\"Runtime\":\"python2.7\",\"Timeout\":\"300\"},\"Type\":\"AWS::Lambda::Function\"},\"SolutionHelperRole\":{\"Properties\":{\"AssumeRolePolicyDocument\":{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"},\"Path\":\"/\",\"Policies\":[{\"PolicyDocument\":{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":{\"Fn::Join\":[\":\",[\"arn:aws:logs\",{\"Ref\":\"AWS::Region\"},{\"Ref\":\"AWS::AccountId\"},\"log-group:/aws/lambda/*\"]]}}],\"Version\":\"2012-10-17\"},\"PolicyName\":\"Solution_Helper_Permissions\"}]},\"Type\":\"AWS::IAM::Role\"},\"WAFBadBotRule\":{\"Condition\":\"BadBotProtectionActivated\",\"DependsOn\":\"WAFBadBotSet\",\"Properties\":{\"MetricName\":\"SecurityAutomationsBadBotRule\",\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"Bad Bot Rule\"]]},\"Predicates\":[{\"DataId\":{\"Ref\":\"WAFBadBotSet\"},\"Negated\":\"false\",\"Type\":\"IPMatch\"}]},\"Type\":\"AWS::WAFRegional::Rule\"},\"WAFBadBotSet\":{\"Condition\":\"BadBotProtectionActivated\",\"Properties\":{\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"IP Bad Bot Set\"]]}},\"Type\":\"AWS::WAFRegional::IPSet\"},\"WAFBlacklistRule\":{\"Condition\":\"LogParserActivated\",\"DependsOn\":\"WAFBlacklistSet\",\"Properties\":{\"MetricName\":\"SecurityAutomationsBlacklistRule\",\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"Blacklist Rule\"]]},\"Predicates\":[{\"DataId\":{\"Ref\":\"WAFBlacklistSet\"},\"Negated\":false,\"Type\":\"IPMatch\"}]},\"Type\":\"AWS::WAFRegional::Rule\"},\"WAFBlacklistSet\":{\"Condition\":\"LogParserActivated\",\"Properties\":{\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"Blacklist Set\"]]}},\"Type\":\"AWS::WAFRegional::IPSet\"},\"WAFIPReputationListsRule1\":{\"Condition\":\"ReputationListsProtectionActivated\",\"DependsOn\":\"WAFReputationListsSet1\",\"Properties\":{\"MetricName\":\"SecurityAutomationsIPReputationListsRule1\",\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"WAF IP Reputation Lists Rule #1\"]]},\"Predicates\":[{\"DataId\":{\"Ref\":\"WAFReputationListsSet1\"},\"Negated\":\"false\",\"Type\":\"IPMatch\"}]},\"Type\":\"AWS::WAFRegional::Rule\"},\"WAFIPReputationListsRule2\":{\"Condition\":\"ReputationListsProtectionActivated\",\"DependsOn\":\"WAFReputationListsSet2\",\"Properties\":{\"MetricName\":\"SecurityAutomationsIPReputationListsRule2\",\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"WAF IP Reputation Lists Rule #2\"]]},\"Predicates\":[{\"DataId\":{\"Ref\":\"WAFReputationListsSet2\"},\"Negated\":\"false\",\"Type\":\"IPMatch\"}]},\"Type\":\"AWS::WAFRegional::Rule\"},\"WAFReputationListsSet1\":{\"Condition\":\"ReputationListsProtectionActivated\",\"Properties\":{\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"IP Reputation Lists Set #1\"]]}},\"Type\":\"AWS::WAFRegional::IPSet\"},\"WAFReputationListsSet2\":{\"Condition\":\"ReputationListsProtectionActivated\",\"Properties\":{\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"IP Reputation Lists Set #2\"]]}},\"Type\":\"AWS::WAFRegional::IPSet\"},\"WAFScansProbesRule\":{\"Condition\":\"LogParserActivated\",\"DependsOn\":\"WAFScansProbesSet\",\"Properties\":{\"MetricName\":\"SecurityAutomationsScansProbesRule\",\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"Scans Probes Rule\"]]},\"Predicates\":[{\"DataId\":{\"Ref\":\"WAFScansProbesSet\"},\"Negated\":false,\"Type\":\"IPMatch\"}]},\"Type\":\"AWS::WAFRegional::Rule\"},\"WAFScansProbesSet\":{\"Condition\":\"LogParserActivated\",\"Properties\":{\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"Scans Probes Set\"]]}},\"Type\":\"AWS::WAFRegional::IPSet\"},\"WAFSqlInjectionDetection\":{\"Condition\":\"SqlInjectionProtectionActivated\",\"Properties\":{\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"SQL injection Detection\"]]},\"SqlInjectionMatchTuples\":[{\"FieldToMatch\":{\"Type\":\"QUERY_STRING\"},\"TextTransformation\":\"URL_DECODE\"},{\"FieldToMatch\":{\"Type\":\"QUERY_STRING\"},\"TextTransformation\":\"HTML_ENTITY_DECODE\"},{\"FieldToMatch\":{\"Type\":\"BODY\"},\"TextTransformation\":\"URL_DECODE\"},{\"FieldToMatch\":{\"Type\":\"BODY\"},\"TextTransformation\":\"HTML_ENTITY_DECODE\"},{\"FieldToMatch\":{\"Type\":\"URI\"},\"TextTransformation\":\"URL_DECODE\"},{\"FieldToMatch\":{\"Type\":\"URI\"},\"TextTransformation\":\"HTML_ENTITY_DECODE\"},{\"FieldToMatch\":{\"Data\":\"Cookie\",\"Type\":\"HEADER\"},\"TextTransformation\":\"URL_DECODE\"},{\"FieldToMatch\":{\"Data\":\"Cookie\",\"Type\":\"HEADER\"},\"TextTransformation\":\"HTML_ENTITY_DECODE\"},{\"FieldToMatch\":{\"Data\":\"Authorization\",\"Type\":\"HEADER\"},\"TextTransformation\":\"URL_DECODE\"},{\"FieldToMatch\":{\"Data\":\"Authorization\",\"Type\":\"HEADER\"},\"TextTransformation\":\"HTML_ENTITY_DECODE\"}]},\"Type\":\"AWS::WAFRegional::SqlInjectionMatchSet\"},\"WAFSqlInjectionRule\":{\"Condition\":\"SqlInjectionProtectionActivated\",\"DependsOn\":\"WAFSqlInjectionDetection\",\"Properties\":{\"MetricName\":\"SecurityAutomationsSqlInjectionRule\",\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"SQL Injection Rule\"]]},\"Predicates\":[{\"DataId\":{\"Ref\":\"WAFSqlInjectionDetection\"},\"Negated\":false,\"Type\":\"SqlInjectionMatch\"}]},\"Type\":\"AWS::WAFRegional::Rule\"},\"WAFWebACL\":{\"Condition\":\"CreateWebACL\",\"DependsOn\":[\"WAFWhitelistRule\"],\"Properties\":{\"DefaultAction\":{\"Type\":\"ALLOW\"},\"MetricName\":\"SecurityAutomationsMaliciousRequesters\",\"Name\":{\"Ref\":\"AWS::StackName\"},\"Rules\":[{\"Action\":{\"Type\":\"ALLOW\"},\"Priority\":10,\"RuleId\":{\"Ref\":\"WAFWhitelistRule\"}}]},\"Type\":\"AWS::WAFRegional::WebACL\"},\"WAFWhitelistRule\":{\"Condition\":\"CreateWebACL\",\"DependsOn\":\"WAFWhitelistSet\",\"Properties\":{\"MetricName\":\"SecurityAutomationsWhitelistRule\",\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"Whitelist Rule\"]]},\"Predicates\":[{\"DataId\":{\"Ref\":\"WAFWhitelistSet\"},\"Negated\":false,\"Type\":\"IPMatch\"}]},\"Type\":\"AWS::WAFRegional::Rule\"},\"WAFWhitelistSet\":{\"Condition\":\"CreateWebACL\",\"Properties\":{\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"Whitelist Set\"]]}},\"Type\":\"AWS::WAFRegional::IPSet\"},\"WAFXssDetection\":{\"Condition\":\"CrossSiteScriptingProtectionActivated\",\"Properties\":{\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"XSS Detection Detection\"]]},\"XssMatchTuples\":[{\"FieldToMatch\":{\"Type\":\"QUERY_STRING\"},\"TextTransformation\":\"URL_DECODE\"},{\"FieldToMatch\":{\"Type\":\"QUERY_STRING\"},\"TextTransformation\":\"HTML_ENTITY_DECODE\"},{\"FieldToMatch\":{\"Type\":\"BODY\"},\"TextTransformation\":\"URL_DECODE\"},{\"FieldToMatch\":{\"Type\":\"BODY\"},\"TextTransformation\":\"HTML_ENTITY_DECODE\"},{\"FieldToMatch\":{\"Type\":\"URI\"},\"TextTransformation\":\"URL_DECODE\"},{\"FieldToMatch\":{\"Type\":\"URI\"},\"TextTransformation\":\"HTML_ENTITY_DECODE\"},{\"FieldToMatch\":{\"Data\":\"Cookie\",\"Type\":\"HEADER\"},\"TextTransformation\":\"URL_DECODE\"},{\"FieldToMatch\":{\"Data\":\"Cookie\",\"Type\":\"HEADER\"},\"TextTransformation\":\"HTML_ENTITY_DECODE\"}]},\"Type\":\"AWS::WAFRegional::XssMatchSet\"},\"WAFXssRule\":{\"Condition\":\"CrossSiteScriptingProtectionActivated\",\"DependsOn\":\"WAFXssDetection\",\"Properties\":{\"MetricName\":\"SecurityAutomationsXssRule\",\"Name\":{\"Fn::Join\":[\" - \",[{\"Ref\":\"AWS::StackName\"},\"XSS Rule\"]]},\"Predicates\":[{\"DataId\":{\"Ref\":\"WAFXssDetection\"},\"Negated\":false,\"Type\":\"XssMatch\"}]},\"Type\":\"AWS::WAFRegional::Rule\"},\"WafWebAclRuleControler\":{\"Condition\":\"CreateWebACL\",\"DependsOn\":[\"LambdaWAFCustomResourceFunction\",\"WAFWebACL\"],\"Properties\":{\"AccessLogBucket\":{\"Fn::If\":[\"LogParserActivated\",{\"Ref\":\"AccessLogBucket\"},{\"Ref\":\"AWS::NoValue\"}]},\"ActivateBadBotProtection\":{\"Ref\":\"ActivateBadBotProtectionParam\"},\"ActivateHttpFloodProtection\":{\"Ref\":\"ActivateHttpFloodProtectionParam\"},\"ActivateReputationListsProtection\":{\"Ref\":\"ActivateReputationListsProtectionParam\"},\"ActivateScansProbesProtection\":{\"Ref\":\"ActivateScansProbesProtectionParam\"},\"CrossSiteScriptingProtection\":{\"Ref\":\"CrossSiteScriptingProtectionParam\"},\"ErrorThreshold\":{\"Ref\":\"ErrorThreshold\"},\"LOG_TYPE\":\"alb\",\"LambdaWAFLogParserFunction\":{\"Fn::If\":[\"LogParserActivated\",{\"Fn::GetAtt\":[\"LambdaWAFLogParserFunction\",\"Arn\"]},{\"Ref\":\"AWS::NoValue\"}]},\"LambdaWAFReputationListsParserFunction\":{\"Fn::If\":[\"ReputationListsProtectionActivated\",{\"Fn::GetAtt\":[\"LambdaWAFReputationListsParserFunction\",\"Arn\"]},{\"Ref\":\"AWS::NoValue\"}]},\"Region\":{\"Ref\":\"AWS::Region\"},\"RequestThreshold\":{\"Ref\":\"RequestThreshold\"},\"SendAnonymousUsageData\":{\"Ref\":\"SendAnonymousUsageData\"},\"ServiceToken\":{\"Fn::GetAtt\":[\"LambdaWAFCustomResourceFunction\",\"Arn\"]},\"SqlInjectionProtection\":{\"Ref\":\"SqlInjectionProtectionParam\"},\"StackName\":{\"Ref\":\"AWS::StackName\"},\"UUID\":{\"Fn::GetAtt\":[\"CreateUniqueID\",\"UUID\"]},\"WAFBadBotRule\":{\"Fn::If\":[\"BadBotProtectionActivated\",{\"Ref\":\"WAFBadBotRule\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFBadBotSet\":{\"Fn::If\":[\"BadBotProtectionActivated\",{\"Ref\":\"WAFBadBotSet\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFBlacklistRule\":{\"Fn::If\":[\"LogParserActivated\",{\"Ref\":\"WAFBlacklistRule\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFBlacklistSet\":{\"Fn::If\":[\"LogParserActivated\",{\"Ref\":\"WAFBlacklistSet\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFBlockPeriod\":{\"Ref\":\"WAFBlockPeriod\"},\"WAFIPReputationListsRule1\":{\"Fn::If\":[\"ReputationListsProtectionActivated\",{\"Ref\":\"WAFIPReputationListsRule1\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFIPReputationListsRule2\":{\"Fn::If\":[\"ReputationListsProtectionActivated\",{\"Ref\":\"WAFIPReputationListsRule2\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFReputationListsSet1\":{\"Fn::If\":[\"ReputationListsProtectionActivated\",{\"Ref\":\"WAFReputationListsSet1\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFReputationListsSet2\":{\"Fn::If\":[\"ReputationListsProtectionActivated\",{\"Ref\":\"WAFReputationListsSet2\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFScansProbesRule\":{\"Fn::If\":[\"LogParserActivated\",{\"Ref\":\"WAFScansProbesRule\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFScansProbesSet\":{\"Fn::If\":[\"ScansProbesProtectionActivated\",{\"Ref\":\"WAFScansProbesSet\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFSqlInjectionRule\":{\"Fn::If\":[\"SqlInjectionProtectionActivated\",{\"Ref\":\"WAFSqlInjectionRule\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFWebACL\":{\"Ref\":\"WAFWebACL\"},\"WAFWhitelistRule\":{\"Fn::If\":[\"CreateWebACL\",{\"Ref\":\"WAFWhitelistRule\"},{\"Ref\":\"AWS::NoValue\"}]},\"WAFWhitelistSet\":{\"Ref\":\"WAFWhitelistSet\"},\"WAFXssRule\":{\"Fn::If\":[\"CrossSiteScriptingProtectionActivated\",{\"Ref\":\"WAFXssRule\"},{\"Ref\":\"AWS::NoValue\"}]}},\"Type\":\"Custom::WafWebAclRuleControler\"}}}",
                            "template_url": "https://s3.amazonaws.com/aws-waf-template/aws-waf-security-automations-alb.template"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 1800000000000,
                                "delete": 1800000000000,
                                "update": 1800000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_lb.external": {
                    "type": "aws_lb",
                    "depends_on": [
                        "aws_s3_bucket.alb_logs",
                        "data.aws_caller_identity.current",
                        "module.alb_ext_sg",
                        "module.vpc"
                    ],
                    "primary": {
                        "id": "arn:aws:elasticloadbalancing:us-east-1:589756021628:loadbalancer/app/prod-fst-alb/867af4e06803bce8",
                        "attributes": {
                            "access_logs.#": "1",
                            "access_logs.0.bucket": "589756021628-prod-fst-alb-logs",
                            "access_logs.0.enabled": "true",
                            "access_logs.0.prefix": "",
                            "arn": "arn:aws:elasticloadbalancing:us-east-1:589756021628:loadbalancer/app/prod-fst-alb/867af4e06803bce8",
                            "arn_suffix": "app/prod-fst-alb/867af4e06803bce8",
                            "dns_name": "prod-fst-alb-1134974718.us-east-1.elb.amazonaws.com",
                            "enable_deletion_protection": "false",
                            "enable_http2": "true",
                            "id": "arn:aws:elasticloadbalancing:us-east-1:589756021628:loadbalancer/app/prod-fst-alb/867af4e06803bce8",
                            "idle_timeout": "60",
                            "internal": "false",
                            "ip_address_type": "ipv4",
                            "load_balancer_type": "application",
                            "name": "prod-fst-alb",
                            "security_groups.#": "1",
                            "security_groups.3816601526": "sg-033b8dd7b681b081c",
                            "subnet_mapping.#": "0",
                            "subnets.#": "4",
                            "subnets.1026918325": "subnet-0a9b0c186b394ea24",
                            "subnets.2613368667": "subnet-08340821489004452",
                            "subnets.2739362450": "subnet-086c1428659f93fff",
                            "subnets.3556940089": "subnet-02520ca5c9cfcc243",
                            "tags.%": "1",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a",
                            "zone_id": "Z35SXDOTRQ7X7K"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000,
                                "update": 600000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route.vpc_accepter.0": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_vpc_peering_connection.peer",
                        "module.vpc"
                    ],
                    "primary": {
                        "id": "r-rtb-0b7da3c8524b0310c2329011089",
                        "attributes": {
                            "destination_cidr_block": "10.2.0.0/20",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-0b7da3c8524b0310c2329011089",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-0b7da3c8524b0310c",
                            "state": "active",
                            "vpc_peering_connection_id": "pcx-0ac07c2e5d9046524"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 300000000000,
                                "delete": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.accepter"
                },
                "aws_route.vpc_accepter.1": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_vpc_peering_connection.peer",
                        "module.vpc"
                    ],
                    "primary": {
                        "id": "r-rtb-092c71e9ad76ada992329011089",
                        "attributes": {
                            "destination_cidr_block": "10.2.0.0/20",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-092c71e9ad76ada992329011089",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-092c71e9ad76ada99",
                            "state": "active",
                            "vpc_peering_connection_id": "pcx-0ac07c2e5d9046524"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 300000000000,
                                "delete": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.accepter"
                },
                "aws_route.vpc_accepter.2": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_vpc_peering_connection.peer",
                        "module.vpc"
                    ],
                    "primary": {
                        "id": "r-rtb-0924d353d1b9fe34e2329011089",
                        "attributes": {
                            "destination_cidr_block": "10.2.0.0/20",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-0924d353d1b9fe34e2329011089",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-0924d353d1b9fe34e",
                            "state": "active",
                            "vpc_peering_connection_id": "pcx-0ac07c2e5d9046524"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 300000000000,
                                "delete": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.accepter"
                },
                "aws_route.vpc_accepter.3": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_vpc_peering_connection.peer",
                        "module.vpc"
                    ],
                    "primary": {
                        "id": "r-rtb-09df63e3ea76162512329011089",
                        "attributes": {
                            "destination_cidr_block": "10.2.0.0/20",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-09df63e3ea76162512329011089",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-09df63e3ea7616251",
                            "state": "active",
                            "vpc_peering_connection_id": "pcx-0ac07c2e5d9046524"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 300000000000,
                                "delete": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.accepter"
                },
                "aws_route.vpc_requester": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_vpc_peering_connection_accepter.peer"
                    ],
                    "primary": {
                        "id": "r-rtb-02e9365f6ab19800b3085032262",
                        "attributes": {
                            "destination_cidr_block": "10.250.0.0/16",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-02e9365f6ab19800b3085032262",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-02e9365f6ab19800b",
                            "state": "active",
                            "vpc_peering_connection_id": "pcx-0ac07c2e5d9046524"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 300000000000,
                                "delete": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.requester"
                },
                "aws_s3_bucket.alb_logs": {
                    "type": "aws_s3_bucket",
                    "depends_on": [
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "589756021628-prod-fst-alb-logs",
                        "attributes": {
                            "acceleration_status": "",
                            "acl": "private",
                            "arn": "arn:aws:s3:::589756021628-prod-fst-alb-logs",
                            "bucket": "589756021628-prod-fst-alb-logs",
                            "bucket_domain_name": "589756021628-prod-fst-alb-logs.s3.amazonaws.com",
                            "bucket_regional_domain_name": "589756021628-prod-fst-alb-logs.s3.amazonaws.com",
                            "cors_rule.#": "0",
                            "force_destroy": "true",
                            "hosted_zone_id": "Z3AQBSTGFYJSTF",
                            "id": "589756021628-prod-fst-alb-logs",
                            "logging.#": "0",
                            "region": "us-east-1",
                            "replication_configuration.#": "0",
                            "request_payer": "BucketOwner",
                            "server_side_encryption_configuration.#": "0",
                            "tags.%": "0",
                            "versioning.#": "1",
                            "versioning.0.enabled": "false",
                            "versioning.0.mfa_delete": "false",
                            "website.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_s3_bucket_policy.logs": {
                    "type": "aws_s3_bucket_policy",
                    "depends_on": [
                        "aws_s3_bucket.alb_logs",
                        "data.aws_caller_identity.current"
                    ],
                    "primary": {
                        "id": "589756021628-prod-fst-alb-logs",
                        "attributes": {
                            "bucket": "589756021628-prod-fst-alb-logs",
                            "id": "589756021628-prod-fst-alb-logs",
                            "policy": "{\"Version\":\"2012-10-17\",\"Id\":\"prod-fst-policy\",\"Statement\":[{\"Sid\":\"prod-fst-id\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::127311923021:root\"},\"Action\":\"s3:PutObject\",\"Resource\":\"arn:aws:s3:::589756021628-prod-fst-alb-logs/*\"}]}"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc_peering_connection.peer": {
                    "type": "aws_vpc_peering_connection",
                    "depends_on": [
                        "data.aws_caller_identity.new",
                        "module.vpc"
                    ],
                    "primary": {
                        "id": "pcx-0ac07c2e5d9046524",
                        "attributes": {
                            "accept_status": "active",
                            "accepter.#": "0",
                            "auto_accept": "false",
                            "id": "pcx-0ac07c2e5d9046524",
                            "peer_owner_id": "589756021628",
                            "peer_region": "us-east-1",
                            "peer_vpc_id": "vpc-05ae0d736309f009a",
                            "requester.#": "1",
                            "requester.1102046665.allow_classic_link_to_remote_vpc": "false",
                            "requester.1102046665.allow_remote_vpc_dns_resolution": "true",
                            "requester.1102046665.allow_vpc_to_remote_classic_link": "false",
                            "tags.%": "2",
                            "tags.Name": "secops_prod-fst",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-0000b9c8f006864bf"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 60000000000,
                                "delete": 60000000000,
                                "update": 60000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.requester"
                },
                "aws_vpc_peering_connection_accepter.peer": {
                    "type": "aws_vpc_peering_connection_accepter",
                    "depends_on": [
                        "aws_vpc_peering_connection.peer"
                    ],
                    "primary": {
                        "id": "pcx-0ac07c2e5d9046524",
                        "attributes": {
                            "accept_status": "active",
                            "accepter.#": "1",
                            "accepter.1102046665.allow_classic_link_to_remote_vpc": "false",
                            "accepter.1102046665.allow_remote_vpc_dns_resolution": "true",
                            "accepter.1102046665.allow_vpc_to_remote_classic_link": "false",
                            "auto_accept": "true",
                            "id": "pcx-0ac07c2e5d9046524",
                            "peer_owner_id": "317150778199",
                            "peer_region": "us-east-1",
                            "peer_vpc_id": "vpc-0000b9c8f006864bf",
                            "requester.#": "0",
                            "tags.%": "2",
                            "tags.Name": "secops_prod-fst",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a",
                            "vpc_peering_connection_id": "pcx-0ac07c2e5d9046524"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.accepter"
                },
                "aws_vpc_peering_connection_options.accepter": {
                    "type": "aws_vpc_peering_connection_options",
                    "depends_on": [
                        "aws_vpc_peering_connection_accepter.peer"
                    ],
                    "primary": {
                        "id": "pcx-0ac07c2e5d9046524",
                        "attributes": {
                            "accepter.#": "1",
                            "accepter.1102046665.allow_classic_link_to_remote_vpc": "false",
                            "accepter.1102046665.allow_remote_vpc_dns_resolution": "true",
                            "accepter.1102046665.allow_vpc_to_remote_classic_link": "false",
                            "id": "pcx-0ac07c2e5d9046524",
                            "requester.#": "0",
                            "vpc_peering_connection_id": "pcx-0ac07c2e5d9046524"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.accepter"
                },
                "aws_vpc_peering_connection_options.requester": {
                    "type": "aws_vpc_peering_connection_options",
                    "depends_on": [
                        "aws_vpc_peering_connection_accepter.peer"
                    ],
                    "primary": {
                        "id": "pcx-0ac07c2e5d9046524",
                        "attributes": {
                            "accepter.#": "0",
                            "id": "pcx-0ac07c2e5d9046524",
                            "requester.#": "1",
                            "requester.1102046665.allow_classic_link_to_remote_vpc": "false",
                            "requester.1102046665.allow_remote_vpc_dns_resolution": "true",
                            "requester.1102046665.allow_vpc_to_remote_classic_link": "false",
                            "vpc_peering_connection_id": "pcx-0ac07c2e5d9046524"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.requester"
                },
                "data.aws_caller_identity.current": {
                    "type": "aws_caller_identity",
                    "depends_on": [],
                    "primary": {
                        "id": "2018-08-15 23:01:42.954266 +0000 UTC",
                        "attributes": {
                            "account_id": "589756021628",
                            "arn": "arn:aws:iam::589756021628:user/tburton",
                            "id": "2018-08-15 23:01:42.954266 +0000 UTC",
                            "user_id": "AIDAIH67IAH2CI32CN5CK"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_caller_identity.new": {
                    "type": "aws_caller_identity",
                    "depends_on": [],
                    "primary": {
                        "id": "2018-08-15 23:01:42.954726 +0000 UTC",
                        "attributes": {
                            "account_id": "589756021628",
                            "arn": "arn:aws:iam::589756021628:user/tburton",
                            "id": "2018-08-15 23:01:42.954726 +0000 UTC",
                            "user_id": "AIDAIH67IAH2CI32CN5CK"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws.accepter"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "alb_ext_sg"
            ],
            "outputs": {
                "this_security_group_description": {
                    "sensitive": false,
                    "type": "string",
                    "value": "allow ports for external facing load balancer"
                },
                "this_security_group_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-033b8dd7b681b081c"
                },
                "this_security_group_name": {
                    "sensitive": false,
                    "type": "string",
                    "value": "alb_ext"
                },
                "this_security_group_owner_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "589756021628"
                },
                "this_security_group_vpc_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "vpc-05ae0d736309f009a"
                }
            },
            "resources": {
                "aws_security_group.this": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-033b8dd7b681b081c",
                        "attributes": {
                            "arn": "arn:aws:ec2:us-east-1:589756021628:security-group/sg-033b8dd7b681b081c",
                            "description": "allow ports for external facing load balancer",
                            "egress.#": "1",
                            "egress.4196057422.cidr_blocks.#": "1",
                            "egress.4196057422.cidr_blocks.0": "0.0.0.0/0",
                            "egress.4196057422.description": "unrestricted outbound",
                            "egress.4196057422.from_port": "0",
                            "egress.4196057422.ipv6_cidr_blocks.#": "0",
                            "egress.4196057422.prefix_list_ids.#": "0",
                            "egress.4196057422.protocol": "-1",
                            "egress.4196057422.security_groups.#": "0",
                            "egress.4196057422.self": "false",
                            "egress.4196057422.to_port": "0",
                            "id": "sg-033b8dd7b681b081c",
                            "ingress.#": "1",
                            "ingress.2776591663.cidr_blocks.#": "1",
                            "ingress.2776591663.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2776591663.description": "inbound https",
                            "ingress.2776591663.from_port": "443",
                            "ingress.2776591663.ipv6_cidr_blocks.#": "0",
                            "ingress.2776591663.protocol": "tcp",
                            "ingress.2776591663.security_groups.#": "0",
                            "ingress.2776591663.self": "false",
                            "ingress.2776591663.to_port": "443",
                            "name": "alb_ext",
                            "owner_id": "589756021628",
                            "revoke_rules_on_delete": "false",
                            "tags.%": "2",
                            "tags.Name": "alb_ext",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_security_group_rule.egress_with_cidr_blocks": {
                    "type": "aws_security_group_rule",
                    "depends_on": [
                        "aws_security_group.this"
                    ],
                    "primary": {
                        "id": "sgrule-711424009",
                        "attributes": {
                            "cidr_blocks.#": "1",
                            "cidr_blocks.0": "0.0.0.0/0",
                            "description": "unrestricted outbound",
                            "from_port": "0",
                            "id": "sgrule-711424009",
                            "ipv6_cidr_blocks.#": "0",
                            "prefix_list_ids.#": "0",
                            "protocol": "-1",
                            "security_group_id": "sg-033b8dd7b681b081c",
                            "self": "false",
                            "to_port": "0",
                            "type": "egress"
                        },
                        "meta": {
                            "schema_version": "2"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_security_group_rule.ingress_with_cidr_blocks": {
                    "type": "aws_security_group_rule",
                    "depends_on": [
                        "aws_security_group.this"
                    ],
                    "primary": {
                        "id": "sgrule-3987568375",
                        "attributes": {
                            "cidr_blocks.#": "1",
                            "cidr_blocks.0": "0.0.0.0/0",
                            "description": "inbound https",
                            "from_port": "443",
                            "id": "sgrule-3987568375",
                            "ipv6_cidr_blocks.#": "0",
                            "prefix_list_ids.#": "0",
                            "protocol": "tcp",
                            "security_group_id": "sg-033b8dd7b681b081c",
                            "self": "false",
                            "to_port": "443",
                            "type": "ingress"
                        },
                        "meta": {
                            "schema_version": "2"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "secops_sg"
            ],
            "outputs": {
                "this_security_group_description": {
                    "sensitive": false,
                    "type": "string",
                    "value": "allow ports for scanning and log delivery"
                },
                "this_security_group_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-051fed5f0a3bc8f0c"
                },
                "this_security_group_name": {
                    "sensitive": false,
                    "type": "string",
                    "value": "secops"
                },
                "this_security_group_owner_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "589756021628"
                },
                "this_security_group_vpc_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "vpc-05ae0d736309f009a"
                }
            },
            "resources": {
                "aws_security_group.this": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-051fed5f0a3bc8f0c",
                        "attributes": {
                            "arn": "arn:aws:ec2:us-east-1:589756021628:security-group/sg-051fed5f0a3bc8f0c",
                            "description": "allow ports for scanning and log delivery",
                            "egress.#": "1",
                            "egress.1693001802.cidr_blocks.#": "1",
                            "egress.1693001802.cidr_blocks.0": "10.2.0.0/20",
                            "egress.1693001802.description": "log delivery",
                            "egress.1693001802.from_port": "514",
                            "egress.1693001802.ipv6_cidr_blocks.#": "0",
                            "egress.1693001802.prefix_list_ids.#": "0",
                            "egress.1693001802.protocol": "udp",
                            "egress.1693001802.security_groups.#": "0",
                            "egress.1693001802.self": "false",
                            "egress.1693001802.to_port": "514",
                            "id": "sg-051fed5f0a3bc8f0c",
                            "ingress.#": "1",
                            "ingress.4029441524.cidr_blocks.#": "1",
                            "ingress.4029441524.cidr_blocks.0": "10.2.0.0/20",
                            "ingress.4029441524.description": "nessus scanning",
                            "ingress.4029441524.from_port": "0",
                            "ingress.4029441524.ipv6_cidr_blocks.#": "0",
                            "ingress.4029441524.protocol": "-1",
                            "ingress.4029441524.security_groups.#": "0",
                            "ingress.4029441524.self": "false",
                            "ingress.4029441524.to_port": "0",
                            "name": "secops",
                            "owner_id": "589756021628",
                            "revoke_rules_on_delete": "false",
                            "tags.%": "2",
                            "tags.Name": "secops",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_security_group_rule.egress_with_cidr_blocks": {
                    "type": "aws_security_group_rule",
                    "depends_on": [
                        "aws_security_group.this"
                    ],
                    "primary": {
                        "id": "sgrule-3990342424",
                        "attributes": {
                            "cidr_blocks.#": "1",
                            "cidr_blocks.0": "10.2.0.0/20",
                            "description": "log delivery",
                            "from_port": "514",
                            "id": "sgrule-3990342424",
                            "ipv6_cidr_blocks.#": "0",
                            "prefix_list_ids.#": "0",
                            "protocol": "udp",
                            "security_group_id": "sg-051fed5f0a3bc8f0c",
                            "self": "false",
                            "to_port": "514",
                            "type": "egress"
                        },
                        "meta": {
                            "schema_version": "2"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_security_group_rule.ingress_with_cidr_blocks": {
                    "type": "aws_security_group_rule",
                    "depends_on": [
                        "aws_security_group.this"
                    ],
                    "primary": {
                        "id": "sgrule-2265106115",
                        "attributes": {
                            "cidr_blocks.#": "1",
                            "cidr_blocks.0": "10.2.0.0/20",
                            "description": "nessus scanning",
                            "from_port": "0",
                            "id": "sgrule-2265106115",
                            "ipv6_cidr_blocks.#": "0",
                            "prefix_list_ids.#": "0",
                            "protocol": "-1",
                            "security_group_id": "sg-051fed5f0a3bc8f0c",
                            "self": "false",
                            "to_port": "0",
                            "type": "ingress"
                        },
                        "meta": {
                            "schema_version": "2"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "vpc"
            ],
            "outputs": {
                "database_subnet_group": {
                    "sensitive": false,
                    "type": "string",
                    "value": "prod-fst"
                },
                "database_subnets": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "subnet-00dff493baa6054dd",
                        "subnet-0ad3358f56b471499",
                        "subnet-0115a987467cd098a",
                        "subnet-043bc6807fe9cc5e0"
                    ]
                },
                "database_subnets_cidr_blocks": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "10.250.21.0/24",
                        "10.250.22.0/24",
                        "10.250.23.0/24",
                        "10.250.24.0/24"
                    ]
                },
                "default_network_acl_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "acl-00677a1f8e242c765"
                },
                "default_route_table_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "rtb-0aabc24654c3a8d9a"
                },
                "default_security_group_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-0a4913d3ce303ad33"
                },
                "default_vpc_cidr_block": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "default_vpc_default_network_acl_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "default_vpc_default_route_table_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "default_vpc_default_security_group_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "default_vpc_enable_dns_hostnames": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "default_vpc_enable_dns_support": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "default_vpc_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "default_vpc_instance_tenancy": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "default_vpc_main_route_table_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "elasticache_subnet_group": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "elasticache_subnet_group_name": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "elasticache_subnets": {
                    "sensitive": false,
                    "type": "list",
                    "value": []
                },
                "elasticache_subnets_cidr_blocks": {
                    "sensitive": false,
                    "type": "list",
                    "value": []
                },
                "igw_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "igw-03ecdb5201160ec65"
                },
                "intra_route_table_ids": {
                    "sensitive": false,
                    "type": "list",
                    "value": []
                },
                "intra_subnets": {
                    "sensitive": false,
                    "type": "list",
                    "value": []
                },
                "intra_subnets_cidr_blocks": {
                    "sensitive": false,
                    "type": "list",
                    "value": []
                },
                "nat_ids": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "eipalloc-054d85dec083515cd",
                        "eipalloc-03b21c67831ec3719",
                        "eipalloc-0315a00a4574ae959",
                        "eipalloc-0f36312abdb7d984f"
                    ]
                },
                "nat_public_ips": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "18.214.70.167",
                        "18.233.113.204",
                        "34.236.225.103",
                        "18.213.61.90"
                    ]
                },
                "natgw_ids": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "nat-0e9794f8d12537bbf",
                        "nat-0f748cdb5b0dbe202",
                        "nat-079c7fe8c0cfd5e12",
                        "nat-0493418202c1e0b91"
                    ]
                },
                "private_route_table_ids": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "rtb-0b7da3c8524b0310c",
                        "rtb-092c71e9ad76ada99",
                        "rtb-0924d353d1b9fe34e",
                        "rtb-09df63e3ea7616251"
                    ]
                },
                "private_subnets": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "subnet-0aa96eddfa9b56412",
                        "subnet-0fe504d968ff05357",
                        "subnet-0e1a57c42bb5b0f9d",
                        "subnet-075d0a3d5669f8d74"
                    ]
                },
                "private_subnets_cidr_blocks": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "10.250.1.0/24",
                        "10.250.2.0/24",
                        "10.250.3.0/24",
                        "10.250.4.0/24"
                    ]
                },
                "public_route_table_ids": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "rtb-0175f5bded7574824"
                    ]
                },
                "public_subnets": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "subnet-02520ca5c9cfcc243",
                        "subnet-08340821489004452",
                        "subnet-0a9b0c186b394ea24",
                        "subnet-086c1428659f93fff"
                    ]
                },
                "public_subnets_cidr_blocks": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "10.250.11.0/24",
                        "10.250.12.0/24",
                        "10.250.13.0/24",
                        "10.250.14.0/24"
                    ]
                },
                "redshift_subnet_group": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "redshift_subnets": {
                    "sensitive": false,
                    "type": "list",
                    "value": []
                },
                "redshift_subnets_cidr_blocks": {
                    "sensitive": false,
                    "type": "list",
                    "value": []
                },
                "vgw_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "vpc_cidr_block": {
                    "sensitive": false,
                    "type": "string",
                    "value": "10.250.0.0/16"
                },
                "vpc_enable_dns_hostnames": {
                    "sensitive": false,
                    "type": "string",
                    "value": "true"
                },
                "vpc_enable_dns_support": {
                    "sensitive": false,
                    "type": "string",
                    "value": "true"
                },
                "vpc_endpoint_dynamodb_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "vpc_endpoint_dynamodb_pl_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": ""
                },
                "vpc_endpoint_s3_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "vpce-076cb700127fe550d"
                },
                "vpc_endpoint_s3_pl_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "pl-63a5400a"
                },
                "vpc_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "vpc-05ae0d736309f009a"
                },
                "vpc_instance_tenancy": {
                    "sensitive": false,
                    "type": "string",
                    "value": "default"
                },
                "vpc_main_route_table_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "rtb-0aabc24654c3a8d9a"
                }
            },
            "resources": {
                "aws_db_subnet_group.database": {
                    "type": "aws_db_subnet_group",
                    "depends_on": [
                        "aws_subnet.database.*"
                    ],
                    "primary": {
                        "id": "prod-fst",
                        "attributes": {
                            "arn": "arn:aws:rds:us-east-1:589756021628:subgrp:prod-fst",
                            "description": "Database subnet group for prod-fst",
                            "id": "prod-fst",
                            "name": "prod-fst",
                            "subnet_ids.#": "4",
                            "subnet_ids.1654307600": "subnet-0ad3358f56b471499",
                            "subnet_ids.1970726102": "subnet-043bc6807fe9cc5e0",
                            "subnet_ids.2764911925": "subnet-00dff493baa6054dd",
                            "subnet_ids.292815616": "subnet-0115a987467cd098a",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst",
                            "tags.Owner": "Terraform"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_eip.nat.0": {
                    "type": "aws_eip",
                    "depends_on": [
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "eipalloc-054d85dec083515cd",
                        "attributes": {
                            "association_id": "eipassoc-03a58ca8",
                            "domain": "vpc",
                            "id": "eipalloc-054d85dec083515cd",
                            "instance": "",
                            "network_interface": "eni-059c9245f6673b6b0",
                            "private_ip": "10.250.11.108",
                            "public_ip": "18.214.70.167",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-us-east-1a",
                            "tags.Owner": "Terraform",
                            "vpc": "true"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "delete": 180000000000,
                                "read": 900000000000,
                                "update": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_eip.nat.1": {
                    "type": "aws_eip",
                    "depends_on": [
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "eipalloc-03b21c67831ec3719",
                        "attributes": {
                            "association_id": "eipassoc-c77ea43b",
                            "domain": "vpc",
                            "id": "eipalloc-03b21c67831ec3719",
                            "instance": "",
                            "network_interface": "eni-019872a7ebb2270d1",
                            "private_ip": "10.250.12.152",
                            "public_ip": "18.233.113.204",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-us-east-1b",
                            "tags.Owner": "Terraform",
                            "vpc": "true"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "delete": 180000000000,
                                "read": 900000000000,
                                "update": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_eip.nat.2": {
                    "type": "aws_eip",
                    "depends_on": [
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "eipalloc-0315a00a4574ae959",
                        "attributes": {
                            "association_id": "eipassoc-42d189fa",
                            "domain": "vpc",
                            "id": "eipalloc-0315a00a4574ae959",
                            "instance": "",
                            "network_interface": "eni-0c0c53bd2d24ec248",
                            "private_ip": "10.250.13.17",
                            "public_ip": "34.236.225.103",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-us-east-1c",
                            "tags.Owner": "Terraform",
                            "vpc": "true"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "delete": 180000000000,
                                "read": 900000000000,
                                "update": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_eip.nat.3": {
                    "type": "aws_eip",
                    "depends_on": [
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "eipalloc-0f36312abdb7d984f",
                        "attributes": {
                            "association_id": "eipassoc-54bbaa8e",
                            "domain": "vpc",
                            "id": "eipalloc-0f36312abdb7d984f",
                            "instance": "",
                            "network_interface": "eni-0aff3419cf318e119",
                            "private_ip": "10.250.14.233",
                            "public_ip": "18.213.61.90",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-us-east-1d",
                            "tags.Owner": "Terraform",
                            "vpc": "true"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "delete": 180000000000,
                                "read": 900000000000,
                                "update": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_internet_gateway.this": {
                    "type": "aws_internet_gateway",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "igw-03ecdb5201160ec65",
                        "attributes": {
                            "id": "igw-03ecdb5201160ec65",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_nat_gateway.this.0": {
                    "type": "aws_nat_gateway",
                    "depends_on": [
                        "aws_internet_gateway.this",
                        "aws_subnet.public.*",
                        "local.nat_gateway_count",
                        "local.nat_gateway_ips"
                    ],
                    "primary": {
                        "id": "nat-0e9794f8d12537bbf",
                        "attributes": {
                            "allocation_id": "eipalloc-054d85dec083515cd",
                            "id": "nat-0e9794f8d12537bbf",
                            "network_interface_id": "eni-059c9245f6673b6b0",
                            "private_ip": "10.250.11.108",
                            "public_ip": "18.214.70.167",
                            "subnet_id": "subnet-02520ca5c9cfcc243",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-us-east-1a",
                            "tags.Owner": "Terraform"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_nat_gateway.this.1": {
                    "type": "aws_nat_gateway",
                    "depends_on": [
                        "aws_internet_gateway.this",
                        "aws_subnet.public.*",
                        "local.nat_gateway_count",
                        "local.nat_gateway_ips"
                    ],
                    "primary": {
                        "id": "nat-0f748cdb5b0dbe202",
                        "attributes": {
                            "allocation_id": "eipalloc-03b21c67831ec3719",
                            "id": "nat-0f748cdb5b0dbe202",
                            "network_interface_id": "eni-019872a7ebb2270d1",
                            "private_ip": "10.250.12.152",
                            "public_ip": "18.233.113.204",
                            "subnet_id": "subnet-08340821489004452",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-us-east-1b",
                            "tags.Owner": "Terraform"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_nat_gateway.this.2": {
                    "type": "aws_nat_gateway",
                    "depends_on": [
                        "aws_internet_gateway.this",
                        "aws_subnet.public.*",
                        "local.nat_gateway_count",
                        "local.nat_gateway_ips"
                    ],
                    "primary": {
                        "id": "nat-079c7fe8c0cfd5e12",
                        "attributes": {
                            "allocation_id": "eipalloc-0315a00a4574ae959",
                            "id": "nat-079c7fe8c0cfd5e12",
                            "network_interface_id": "eni-0c0c53bd2d24ec248",
                            "private_ip": "10.250.13.17",
                            "public_ip": "34.236.225.103",
                            "subnet_id": "subnet-0a9b0c186b394ea24",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-us-east-1c",
                            "tags.Owner": "Terraform"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_nat_gateway.this.3": {
                    "type": "aws_nat_gateway",
                    "depends_on": [
                        "aws_internet_gateway.this",
                        "aws_subnet.public.*",
                        "local.nat_gateway_count",
                        "local.nat_gateway_ips"
                    ],
                    "primary": {
                        "id": "nat-0493418202c1e0b91",
                        "attributes": {
                            "allocation_id": "eipalloc-0f36312abdb7d984f",
                            "id": "nat-0493418202c1e0b91",
                            "network_interface_id": "eni-0aff3419cf318e119",
                            "private_ip": "10.250.14.233",
                            "public_ip": "18.213.61.90",
                            "subnet_id": "subnet-086c1428659f93fff",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-us-east-1d",
                            "tags.Owner": "Terraform"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route.private_nat_gateway.0": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_nat_gateway.this.*",
                        "aws_route_table.private.*",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "r-rtb-0b7da3c8524b0310c1080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-0b7da3c8524b0310c1080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "nat-0e9794f8d12537bbf",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-0b7da3c8524b0310c",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 300000000000,
                                "delete": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route.private_nat_gateway.1": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_nat_gateway.this.*",
                        "aws_route_table.private.*",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "r-rtb-092c71e9ad76ada991080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-092c71e9ad76ada991080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "nat-0f748cdb5b0dbe202",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-092c71e9ad76ada99",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 300000000000,
                                "delete": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route.private_nat_gateway.2": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_nat_gateway.this.*",
                        "aws_route_table.private.*",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "r-rtb-0924d353d1b9fe34e1080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-0924d353d1b9fe34e1080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "nat-079c7fe8c0cfd5e12",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-0924d353d1b9fe34e",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 300000000000,
                                "delete": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route.private_nat_gateway.3": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_nat_gateway.this.*",
                        "aws_route_table.private.*",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "r-rtb-09df63e3ea76162511080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-09df63e3ea76162511080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "nat-0493418202c1e0b91",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-09df63e3ea7616251",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 300000000000,
                                "delete": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route.public_internet_gateway": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_internet_gateway.this",
                        "aws_route_table.public"
                    ],
                    "primary": {
                        "id": "r-rtb-0175f5bded75748241080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "egress_only_gateway_id": "",
                            "gateway_id": "igw-03ecdb5201160ec65",
                            "id": "r-rtb-0175f5bded75748241080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-0175f5bded7574824",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 300000000000,
                                "delete": 300000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table.private.0": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.this",
                        "local.max_subnet_length",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "rtb-0b7da3c8524b0310c",
                        "attributes": {
                            "id": "rtb-0b7da3c8524b0310c",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.488896709.cidr_block": "0.0.0.0/0",
                            "route.488896709.egress_only_gateway_id": "",
                            "route.488896709.gateway_id": "",
                            "route.488896709.instance_id": "",
                            "route.488896709.ipv6_cidr_block": "",
                            "route.488896709.nat_gateway_id": "nat-0e9794f8d12537bbf",
                            "route.488896709.network_interface_id": "",
                            "route.488896709.vpc_peering_connection_id": "",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-private-us-east-1a",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table.private.1": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.this",
                        "local.max_subnet_length",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "rtb-092c71e9ad76ada99",
                        "attributes": {
                            "id": "rtb-092c71e9ad76ada99",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.2636379907.cidr_block": "0.0.0.0/0",
                            "route.2636379907.egress_only_gateway_id": "",
                            "route.2636379907.gateway_id": "",
                            "route.2636379907.instance_id": "",
                            "route.2636379907.ipv6_cidr_block": "",
                            "route.2636379907.nat_gateway_id": "nat-0f748cdb5b0dbe202",
                            "route.2636379907.network_interface_id": "",
                            "route.2636379907.vpc_peering_connection_id": "",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-private-us-east-1b",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table.private.2": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.this",
                        "local.max_subnet_length",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "rtb-0924d353d1b9fe34e",
                        "attributes": {
                            "id": "rtb-0924d353d1b9fe34e",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.847520937.cidr_block": "0.0.0.0/0",
                            "route.847520937.egress_only_gateway_id": "",
                            "route.847520937.gateway_id": "",
                            "route.847520937.instance_id": "",
                            "route.847520937.ipv6_cidr_block": "",
                            "route.847520937.nat_gateway_id": "nat-079c7fe8c0cfd5e12",
                            "route.847520937.network_interface_id": "",
                            "route.847520937.vpc_peering_connection_id": "",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-private-us-east-1c",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table.private.3": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.this",
                        "local.max_subnet_length",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "rtb-09df63e3ea7616251",
                        "attributes": {
                            "id": "rtb-09df63e3ea7616251",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.3922934431.cidr_block": "0.0.0.0/0",
                            "route.3922934431.egress_only_gateway_id": "",
                            "route.3922934431.gateway_id": "",
                            "route.3922934431.instance_id": "",
                            "route.3922934431.ipv6_cidr_block": "",
                            "route.3922934431.nat_gateway_id": "nat-0493418202c1e0b91",
                            "route.3922934431.network_interface_id": "",
                            "route.3922934431.vpc_peering_connection_id": "",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-private-us-east-1d",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table.public": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "rtb-0175f5bded7574824",
                        "attributes": {
                            "id": "rtb-0175f5bded7574824",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.1944584560.cidr_block": "0.0.0.0/0",
                            "route.1944584560.egress_only_gateway_id": "",
                            "route.1944584560.gateway_id": "igw-03ecdb5201160ec65",
                            "route.1944584560.instance_id": "",
                            "route.1944584560.ipv6_cidr_block": "",
                            "route.1944584560.nat_gateway_id": "",
                            "route.1944584560.network_interface_id": "",
                            "route.1944584560.vpc_peering_connection_id": "",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-public",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.database.0": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_subnet.database.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-0a727d8142cd120f4",
                        "attributes": {
                            "id": "rtbassoc-0a727d8142cd120f4",
                            "route_table_id": "rtb-0b7da3c8524b0310c",
                            "subnet_id": "subnet-00dff493baa6054dd"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.database.1": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_subnet.database.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-0f73a4718e7534f65",
                        "attributes": {
                            "id": "rtbassoc-0f73a4718e7534f65",
                            "route_table_id": "rtb-092c71e9ad76ada99",
                            "subnet_id": "subnet-0ad3358f56b471499"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.database.2": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_subnet.database.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-082db010c3b7fc84a",
                        "attributes": {
                            "id": "rtbassoc-082db010c3b7fc84a",
                            "route_table_id": "rtb-0924d353d1b9fe34e",
                            "subnet_id": "subnet-0115a987467cd098a"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.database.3": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_subnet.database.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-04e0e2e075971a8ed",
                        "attributes": {
                            "id": "rtbassoc-04e0e2e075971a8ed",
                            "route_table_id": "rtb-09df63e3ea7616251",
                            "subnet_id": "subnet-043bc6807fe9cc5e0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.private.0": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_subnet.private.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-02672af800699ba91",
                        "attributes": {
                            "id": "rtbassoc-02672af800699ba91",
                            "route_table_id": "rtb-0b7da3c8524b0310c",
                            "subnet_id": "subnet-0aa96eddfa9b56412"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.private.1": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_subnet.private.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-0d28eb75515753706",
                        "attributes": {
                            "id": "rtbassoc-0d28eb75515753706",
                            "route_table_id": "rtb-092c71e9ad76ada99",
                            "subnet_id": "subnet-0fe504d968ff05357"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.private.2": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_subnet.private.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-068b6b12b530bcb7b",
                        "attributes": {
                            "id": "rtbassoc-068b6b12b530bcb7b",
                            "route_table_id": "rtb-0924d353d1b9fe34e",
                            "subnet_id": "subnet-0e1a57c42bb5b0f9d"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.private.3": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_subnet.private.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-034793c1db5f7d808",
                        "attributes": {
                            "id": "rtbassoc-034793c1db5f7d808",
                            "route_table_id": "rtb-09df63e3ea7616251",
                            "subnet_id": "subnet-075d0a3d5669f8d74"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.public.0": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.public",
                        "aws_subnet.public.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-0acd6143ba9d88b7f",
                        "attributes": {
                            "id": "rtbassoc-0acd6143ba9d88b7f",
                            "route_table_id": "rtb-0175f5bded7574824",
                            "subnet_id": "subnet-02520ca5c9cfcc243"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.public.1": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.public",
                        "aws_subnet.public.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-02e69b6de4e646563",
                        "attributes": {
                            "id": "rtbassoc-02e69b6de4e646563",
                            "route_table_id": "rtb-0175f5bded7574824",
                            "subnet_id": "subnet-08340821489004452"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.public.2": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.public",
                        "aws_subnet.public.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-09a5a8d2aada65bd4",
                        "attributes": {
                            "id": "rtbassoc-09a5a8d2aada65bd4",
                            "route_table_id": "rtb-0175f5bded7574824",
                            "subnet_id": "subnet-0a9b0c186b394ea24"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.public.3": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.public",
                        "aws_subnet.public.*"
                    ],
                    "primary": {
                        "id": "rtbassoc-07fc0eb15cf65f228",
                        "attributes": {
                            "id": "rtbassoc-07fc0eb15cf65f228",
                            "route_table_id": "rtb-0175f5bded7574824",
                            "subnet_id": "subnet-086c1428659f93fff"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.database.0": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-00dff493baa6054dd",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1a",
                            "cidr_block": "10.250.21.0/24",
                            "id": "subnet-00dff493baa6054dd",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-db-us-east-1a",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.database.1": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-0ad3358f56b471499",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1b",
                            "cidr_block": "10.250.22.0/24",
                            "id": "subnet-0ad3358f56b471499",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-db-us-east-1b",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.database.2": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-0115a987467cd098a",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1c",
                            "cidr_block": "10.250.23.0/24",
                            "id": "subnet-0115a987467cd098a",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-db-us-east-1c",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.database.3": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-043bc6807fe9cc5e0",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1d",
                            "cidr_block": "10.250.24.0/24",
                            "id": "subnet-043bc6807fe9cc5e0",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-db-us-east-1d",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.private.0": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-0aa96eddfa9b56412",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1a",
                            "cidr_block": "10.250.1.0/24",
                            "id": "subnet-0aa96eddfa9b56412",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-private-us-east-1a",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.private.1": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-0fe504d968ff05357",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1b",
                            "cidr_block": "10.250.2.0/24",
                            "id": "subnet-0fe504d968ff05357",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-private-us-east-1b",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.private.2": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-0e1a57c42bb5b0f9d",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1c",
                            "cidr_block": "10.250.3.0/24",
                            "id": "subnet-0e1a57c42bb5b0f9d",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-private-us-east-1c",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.private.3": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-075d0a3d5669f8d74",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1d",
                            "cidr_block": "10.250.4.0/24",
                            "id": "subnet-075d0a3d5669f8d74",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-private-us-east-1d",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.public.0": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-02520ca5c9cfcc243",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1a",
                            "cidr_block": "10.250.11.0/24",
                            "id": "subnet-02520ca5c9cfcc243",
                            "map_public_ip_on_launch": "true",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-public-us-east-1a",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.public.1": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-08340821489004452",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1b",
                            "cidr_block": "10.250.12.0/24",
                            "id": "subnet-08340821489004452",
                            "map_public_ip_on_launch": "true",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-public-us-east-1b",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.public.2": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-0a9b0c186b394ea24",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1c",
                            "cidr_block": "10.250.13.0/24",
                            "id": "subnet-0a9b0c186b394ea24",
                            "map_public_ip_on_launch": "true",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-public-us-east-1c",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.public.3": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.this"
                    ],
                    "primary": {
                        "id": "subnet-086c1428659f93fff",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "us-east-1d",
                            "cidr_block": "10.250.14.0/24",
                            "id": "subnet-086c1428659f93fff",
                            "map_public_ip_on_launch": "true",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst-public-us-east-1d",
                            "tags.Owner": "Terraform",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc.this": {
                    "type": "aws_vpc",
                    "depends_on": [],
                    "primary": {
                        "id": "vpc-05ae0d736309f009a",
                        "attributes": {
                            "arn": "arn:aws:ec2:us-east-1:589756021628:vpc/vpc-05ae0d736309f009a",
                            "assign_generated_ipv6_cidr_block": "false",
                            "cidr_block": "10.250.0.0/16",
                            "default_network_acl_id": "acl-00677a1f8e242c765",
                            "default_route_table_id": "rtb-0aabc24654c3a8d9a",
                            "default_security_group_id": "sg-0a4913d3ce303ad33",
                            "dhcp_options_id": "dopt-08a62d6f98c77da54",
                            "enable_classiclink": "false",
                            "enable_classiclink_dns_support": "false",
                            "enable_dns_hostnames": "true",
                            "enable_dns_support": "true",
                            "id": "vpc-05ae0d736309f009a",
                            "instance_tenancy": "default",
                            "main_route_table_id": "rtb-0aabc24654c3a8d9a",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst",
                            "tags.Owner": "Terraform"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc_dhcp_options.this": {
                    "type": "aws_vpc_dhcp_options",
                    "depends_on": [],
                    "primary": {
                        "id": "dopt-08a62d6f98c77da54",
                        "attributes": {
                            "domain_name": "prod-fst.xylem-cloud.com",
                            "domain_name_servers.#": "2",
                            "domain_name_servers.0": "127.0.0.1",
                            "domain_name_servers.1": "10.250.0.2",
                            "id": "dopt-08a62d6f98c77da54",
                            "tags.%": "3",
                            "tags.Customer": "prod-fst",
                            "tags.Name": "prod-fst",
                            "tags.Owner": "Terraform"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc_dhcp_options_association.this": {
                    "type": "aws_vpc_dhcp_options_association",
                    "depends_on": [
                        "aws_vpc.this",
                        "aws_vpc_dhcp_options.this"
                    ],
                    "primary": {
                        "id": "dopt-08a62d6f98c77da54-vpc-05ae0d736309f009a",
                        "attributes": {
                            "dhcp_options_id": "dopt-08a62d6f98c77da54",
                            "id": "dopt-08a62d6f98c77da54-vpc-05ae0d736309f009a",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc_endpoint.s3": {
                    "type": "aws_vpc_endpoint",
                    "depends_on": [
                        "aws_vpc.this",
                        "data.aws_vpc_endpoint_service.s3"
                    ],
                    "primary": {
                        "id": "vpce-076cb700127fe550d",
                        "attributes": {
                            "cidr_blocks.#": "2",
                            "cidr_blocks.0": "54.231.0.0/17",
                            "cidr_blocks.1": "52.216.0.0/15",
                            "dns_entry.#": "0",
                            "id": "vpce-076cb700127fe550d",
                            "network_interface_ids.#": "0",
                            "policy": "{\"Statement\":[{\"Action\":\"*\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2008-10-17\"}",
                            "prefix_list_id": "pl-63a5400a",
                            "private_dns_enabled": "false",
                            "route_table_ids.#": "5",
                            "route_table_ids.1510271549": "rtb-09df63e3ea7616251",
                            "route_table_ids.2690427171": "rtb-0175f5bded7574824",
                            "route_table_ids.3302515871": "rtb-0924d353d1b9fe34e",
                            "route_table_ids.3569640222": "rtb-092c71e9ad76ada99",
                            "route_table_ids.759563766": "rtb-0b7da3c8524b0310c",
                            "security_group_ids.#": "0",
                            "service_name": "com.amazonaws.us-east-1.s3",
                            "state": "available",
                            "subnet_ids.#": "0",
                            "vpc_endpoint_type": "Gateway",
                            "vpc_id": "vpc-05ae0d736309f009a"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000,
                                "update": 600000000000
                            }
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc_endpoint_route_table_association.private_s3.0": {
                    "type": "aws_vpc_endpoint_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_vpc_endpoint.s3",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "a-vpce-076cb700127fe550d759563766",
                        "attributes": {
                            "id": "a-vpce-076cb700127fe550d759563766",
                            "route_table_id": "rtb-0b7da3c8524b0310c",
                            "vpc_endpoint_id": "vpce-076cb700127fe550d"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc_endpoint_route_table_association.private_s3.1": {
                    "type": "aws_vpc_endpoint_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_vpc_endpoint.s3",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "a-vpce-076cb700127fe550d3569640222",
                        "attributes": {
                            "id": "a-vpce-076cb700127fe550d3569640222",
                            "route_table_id": "rtb-092c71e9ad76ada99",
                            "vpc_endpoint_id": "vpce-076cb700127fe550d"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc_endpoint_route_table_association.private_s3.2": {
                    "type": "aws_vpc_endpoint_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_vpc_endpoint.s3",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "a-vpce-076cb700127fe550d3302515871",
                        "attributes": {
                            "id": "a-vpce-076cb700127fe550d3302515871",
                            "route_table_id": "rtb-0924d353d1b9fe34e",
                            "vpc_endpoint_id": "vpce-076cb700127fe550d"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc_endpoint_route_table_association.private_s3.3": {
                    "type": "aws_vpc_endpoint_route_table_association",
                    "depends_on": [
                        "aws_route_table.private.*",
                        "aws_vpc_endpoint.s3",
                        "local.nat_gateway_count"
                    ],
                    "primary": {
                        "id": "a-vpce-076cb700127fe550d1510271549",
                        "attributes": {
                            "id": "a-vpce-076cb700127fe550d1510271549",
                            "route_table_id": "rtb-09df63e3ea7616251",
                            "vpc_endpoint_id": "vpce-076cb700127fe550d"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc_endpoint_route_table_association.public_s3": {
                    "type": "aws_vpc_endpoint_route_table_association",
                    "depends_on": [
                        "aws_route_table.public",
                        "aws_vpc_endpoint.s3"
                    ],
                    "primary": {
                        "id": "a-vpce-076cb700127fe550d2690427171",
                        "attributes": {
                            "id": "a-vpce-076cb700127fe550d2690427171",
                            "route_table_id": "rtb-0175f5bded7574824",
                            "vpc_endpoint_id": "vpce-076cb700127fe550d"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_vpc_endpoint_service.s3": {
                    "type": "aws_vpc_endpoint_service",
                    "depends_on": [],
                    "primary": {
                        "id": "195798706",
                        "attributes": {
                            "acceptance_required": "false",
                            "availability_zones.#": "6",
                            "availability_zones.1252502072": "us-east-1f",
                            "availability_zones.1305112097": "us-east-1b",
                            "availability_zones.2762590996": "us-east-1d",
                            "availability_zones.3551460226": "us-east-1e",
                            "availability_zones.3569565595": "us-east-1a",
                            "availability_zones.986537655": "us-east-1c",
                            "base_endpoint_dns_names.#": "1",
                            "base_endpoint_dns_names.1629071467": "s3.us-east-1.amazonaws.com",
                            "id": "195798706",
                            "owner": "amazon",
                            "private_dns_name": "",
                            "service": "s3",
                            "service_name": "com.amazonaws.us-east-1.s3",
                            "service_type": "Gateway",
                            "vpc_endpoint_policy_supported": "true"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                }
            },
            "depends_on": []
        }
    ]
}
